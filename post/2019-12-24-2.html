<!DOCTYPE html> <html> <!-- This page is used centrarium Jekyll theme Copyright (c) 2015 Ben Centra Released under the MIT license https://github.com/bencentra/centrarium/blob/daa0d16ba9156ad43f9980e2075023a0d48859a5/LICENSE.md --> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"> <title>Google ColaboratoryのRランタイムでCSVを操作してみる</title> <meta name="description" content="ColaboratoryはGoogle社が提供クラウド型のJupyter Notebook環境です。 Googleアカウントがあれば、無料で使用できます。今回はこのColaboratoryのR言語のランタイムを使用してCSVを操作する方法を紹介します。"> <meta name="author" content="Tadayuki Onishi"> <meta name="copyright" content="© Tadayuki Onishi 2025"> <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon"> <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon"> <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png"> <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png"> <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png"> <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png"> <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png"> <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png"> <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png"> <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-icon-192x192.png"> <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png"> <link rel="manifest" href="/assets/icons/manifest.json"> <meta name="msapplication-TileColor" content="#ffffff"> <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png"> <meta name="theme-color" content="#ffffff"> <meta property="fb:app_id" content="376889769419405"> <meta property="og:description" content="ColaboratoryはGoogle社が提供クラウド型のJupyter Notebook環境です。 Googleアカウントがあれば、無料で使用できます。今回はこのColaboratoryのR言語のランタイムを使用してCSVを操作する方法を紹介します。"> <meta property="og:url" content="https://kenchan0130.github.io/post/2019-12-24-2"> <meta property="og:site_name" content="kenchan0130 blog"> <meta property="og:title" content="Google ColaboratoryのRランタイムでCSVを操作してみる"> <meta property="og:type" content="website"> <meta property="og:author" content="Tadayuki Onishi"> <meta property="og:image" content="https://kenchan0130.github.io/assets/logo.png"> <meta property="og:image:width" content="760"> <meta property="og:image:height" content="760"> <meta property="og:image:type" content="image/png"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="Google ColaboratoryのRランタイムでCSVを操作してみる"> <meta name="twitter:site" content="@kenchan0130"> <meta name="twitter:description" content="ColaboratoryはGoogle社が提供クラウド型のJupyter Notebook環境です。 Googleアカウントがあれば、無料で使用できます。今回はこのColaboratoryのR言語のランタイムを使用してCSVを操作する方法を紹介します。"> <meta name="twitter:image" content="https://kenchan0130.github.io/assets/logo.png"> <meta name="twitter:url" content="https://kenchan0130.github.io/post/2019-12-24-2"> <link rel="preload" as="style" href="/assets/bundle/app.6b4bd929e0a1773ddf90.css" onload="this.onload=null;this.rel='stylesheet'"> <noscript> <link rel="stylesheet" href="/assets/bundle/app.6b4bd929e0a1773ddf90.css"> </noscript> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="https://kenchan0130.github.io/post/2019-12-24-2"> <link rel="alternate" type="application/atom+xml" title="kenchan0130 blog" href="https://kenchan0130.github.io/feed.xml"> <meta name="google-site-verification" content="ZxlKORgZZwZ4TTmaQJFFEXLF3jmd6P_NVU9TEVW1bSg"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> </head> <body> <header class="navigation" role="banner"> <div class="navigation-wrapper"> <a href="/" class="logo"> <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="kenchan0130 blog" data-src="/assets/logo.png" class="lazyload"> </a> <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu"> <i class="fas fa-bars"></i> </a> <nav role="navigation"> <ul id="js-navigation-menu" class="navigation-menu"> <li class="nav-search-box"> <div class="search-input-container"> <input type="search" class="search-input" id="js-search-input" placeholder="Search" autocomplete="off" onfocus="gtag('event', 'search', { event_category: 'www.algolia.com/apps/DEFR5IK9E2/explorer/browse/kenchan0130_blog', event_label: '/post/2019-12-24-2' });"> <i class="fa fa-search search-input-icon"></i> <template id="suggestion-template"> <a href="" onclick="gtag('event', 'click', { event_category: 'www.algolia.com/apps/DEFR5IK9E2/explorer/browse/kenchan0130_blog', event_label: this.href });"> <p class="suggestion-title js-suggestion-title"></p> <p class="suggestion-content js-suggestion-content"></p> </a> </template> </div> </li> <li class="nav-link"> <a href="/archives">Archives</a> </li> <li class="nav-link"> <a href="/profile">Profile</a> </li> </ul> </nav> </div> </header> <div class="page-content"> <div class="post"> <div class="post-header-container "> <div class="scrim "> <header class="post-header"> <h1 class="title">Google ColaboratoryのRランタイムでCSVを操作してみる</h1> </header> </div> </div> <div class="wrapper"> <span class="page-divider"> <span class="one"></span> <span class="two"></span> </span> <section class="post-meta"> <div class="post-date">2019-12-24</div> <div class="post-categories"> <i class="fas fa-fw fa-book"></i> <a href="/category/development">development </a> </div> </section> <article class="post-content"> <p>ColaboratoryはGoogle社が提供クラウド型のJupyter Notebook環境です。 Googleアカウントがあれば、無料で使用できます。</p> <p>今回はこのColaboratoryのR言語のランタイムを使用してCSVを操作する方法を紹介します。</p> <p>この記事は<a href="https://qiita.com/advent-calendar/2019/folio-sec" target="_blank" rel="noopener noreferrer">FOLIO Advent Calendar 2019</a>の12月12日の代打記事でもあります。</p> <ul id="markdown-toc"> <li><a href="#google-colaboratory" id="markdown-toc-google-colaboratory">Google Colaboratory</a></li> <li><a href="#google-colaboratory%E3%81%A7r%E3%82%92%E5%8B%95%E3%81%8B%E3%81%99" id="markdown-toc-google-colaboratoryでrを動かす">Google ColaboratoryでRを動かす</a></li> <li><a href="#%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%9F%E3%81%84%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%82%A2%E3%83%83%E3%83%97%E3%83%AD%E3%83%BC%E3%83%89" id="markdown-toc-使用したいファイルをアップロード">使用したいファイルをアップロード</a></li> <li><a href="#csv%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B" id="markdown-toc-csvを操作してみる">CSVを操作してみる</a></li> <li><a href="#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB" id="markdown-toc-終わりに">終わりに</a></li> </ul> <h2 id="google-colaboratory">Google Colaboratory</h2> <p>前述の通り、ColaboratoryはGoogle社が提供クラウド型のJupyter Notebook環境です。 2コアのCPUとGPU、TPUが無料で使用できます。スゴイ！</p> <p>動作するランタイムは、以下の4つの言語です</p> <ul> <li>Python 2</li> <li>Python 3</li> <li>R</li> <li>Swift（for TensorFlow） <ul> <li>Swiftコンパイラを拡張してTensorFlowを使えるようにしたもの</li> </ul> </li> </ul> <p>また、ColaboratoryはGoogle Driveの一アプリケーションであるため、GSuiteに属するためエンタープライズユースも可能です。</p> <h2 id="google-colaboratoryでrを動かす">Google ColaboratoryでRを動かす</h2> <p>ColaboratoryはデフォルトでPython2とPython3が使用できるようになっていますが、R言語も使用が可能です。</p> <p><a href="/assets/posts/post/2019-12-24-2/notebook_settings_default.png" data-fancybox="images" data-caption="デフォルトのノートブックの設定"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="デフォルトのノートブックの設定" data-src="/assets/posts/post/2019-12-24-2/notebook_settings_default.png" class="lazyload"></a></p> <p>Rを動かすためには以下のJSONファイルを<code class="language-plaintext highlighter-rouge">.ipynb</code>拡張子で保存し、アップロードすることで実現が可能となります。</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"nbformat"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
  </span><span class="nl">"nbformat_minor"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"colab"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="nl">"provenance"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"kernelspec"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ir"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"display_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"R"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"cells"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p><a href="/assets/posts/post/2019-12-24-2/upload_notebook.png" data-fancybox="images" data-caption="ノートブックのアップロード"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="ノートブックのアップロード" data-src="/assets/posts/post/2019-12-24-2/upload_notebook.png" class="lazyload"></a> <a href="/assets/posts/post/2019-12-24-2/notebook_settings_with_r.png" data-fancybox="images" data-caption="Rが使用できる状態のノートブックの設定"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Rが使用できる状態のノートブックの設定" data-src="/assets/posts/post/2019-12-24-2/notebook_settings_with_r.png" class="lazyload"></a></p> <p>実際Rが動くか試すためにRのバージョン情報を表示してみます。</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">R.version</span><span class="w">
</span></code></pre></div></div> <p><a href="/assets/posts/post/2019-12-24-2/run_r_print_version.png" data-fancybox="images" data-caption="Rのバージョン情報を表示"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Rのバージョン情報を表示" data-src="/assets/posts/post/2019-12-24-2/run_r_print_version.png" class="lazyload"></a></p> <p>執筆時点で最新版のRが使用できることが確認できました。 必ず最新版とは限らないですが、ほぼ最新版が使用できるようになっているのだと思われます。</p> <h2 id="使用したいファイルをアップロード">使用したいファイルをアップロード</h2> <p>ColaboratoryのRランタイムでは、PythonのようにGoogle Driveのマウントができないですが、ファイルはアップロードできます。</p> <p><a href="/assets/posts/post/2019-12-24-2/notebook_file_upload.png" data-fancybox="images" data-caption="ノートブックにファイルをアップロード"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="ノートブックにファイルをアップロード" data-src="/assets/posts/post/2019-12-24-2/notebook_file_upload.png" class="lazyload"></a></p> <p>今回は、<a href="https://www.fsa.go.jp/menkyo/menkyo.html" target="_blank" rel="noopener noreferrer">免許・許可・登録等を受けている業者一覧</a>から取得した金融商品取引業者を最低限のCSVデータにしたものをアップロードしてみます。 デフォルトのワーキングディレクトリは<code class="language-plaintext highlighter-rouge">/content</code>であり、ファイルはこの配下にアップロードされます。</p> <p>実際アップロードした結果、ファイルがアップロードされていることが確認できます。</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">list.files</span><span class="p">()</span><span class="w">
</span><span class="c1"># 1. 'financial_instruments_traders.csv'</span><span class="w">
</span><span class="c1"># 2. 'sample_data'</span><span class="w">
</span></code></pre></div></div> <h2 id="csvを操作してみる">CSVを操作してみる</h2> <p>Rの標準の<code class="language-plaintext highlighter-rouge">read.csv</code>を使用してもよいですが、今回は高速なデータフレームでおなじみの<code class="language-plaintext highlighter-rouge">data.table</code>を使用してみます。</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"data.table"</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">data.table</span><span class="p">)</span><span class="w">
</span><span class="c1"># CPUが2コアあるので2コア分設定</span><span class="w">
</span><span class="n">setDTthreads</span><span class="p">(</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="c1"># dplyrはデフォルトでインストールされている</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">data.table</code>と<code class="language-plaintext highlighter-rouge">dplyr</code>の呼び出しをしておき以降それらを使えるようにしておきます。 まずは、CSVデータを読み取り先頭を表示してみます。</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">financial_instruments_traders_data</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">fread</span><span class="p">(</span><span class="s1">'financial_instruments_traders.csv'</span><span class="p">)</span><span class="w">
</span><span class="n">financial_instruments_traders_data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">head</span><span class="w">
</span></code></pre></div></div> <p><a href="/assets/posts/post/2019-12-24-2/data_table_print_head.png" data-fancybox="images" data-caption="data.tableで読みとったCSVのheadの表示"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="data.tableで読みとったCSVのheadの表示" data-src="/assets/posts/post/2019-12-24-2/data_table_print_head.png" class="lazyload"></a></p> <p>無事読み込めました。ここからはRの世界です。</p> <p>たとえば、各所管ごとの第一種金融取引業者と第二種金融取引業者の合計数を出したいとした場合は</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">financial_instruments_traders_data</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">第一種</span><span class="p">,</span><span class="w"> </span><span class="n">第一種</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">第一種</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"○"</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">第二種</span><span class="p">,</span><span class="w"> </span><span class="n">第二種</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">第二種</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"○"</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">所管</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">summarise</span><span class="p">(</span><span class="nf">sum</span><span class="p">(</span><span class="n">第一種</span><span class="p">),</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">第二種</span><span class="p">))</span><span class="w">
</span></code></pre></div></div> <p>とすることで出力できます。</p> <p><a href="/assets/posts/post/2019-12-24-2/summarised_group_by_shokan.png" data-fancybox="images" data-caption="各所管ごとの第一種金融取引業者と第二種金融取引業者の合計数"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="各所管ごとの第一種金融取引業者と第二種金融取引業者の合計数" data-src="/assets/posts/post/2019-12-24-2/summarised_group_by_shokan.png" class="lazyload"></a></p> <p>もちろんプロットも可能です。今回は<code class="language-plaintext highlighter-rouge">ggplot2</code>を使ってプロットしてみます。 まずは必要なライブラリを準備します。</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="s2">"reshape2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"ggsci"</span><span class="p">))</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">reshape2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggsci</span><span class="p">)</span><span class="w">
</span><span class="c1"># ggplot2はデフォルトでインストールされている</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p>先程の例のデータを横並びの棒グラフで表現したいとした場合、以下のようにしてグラフを得ます。</p> <div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summarised_group_by_shokan</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">financial_instruments_traders_data</span><span class="err">　</span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">第一種</span><span class="p">,</span><span class="w"> </span><span class="n">FirstKind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">第一種</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"○"</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="err">　</span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">mutate</span><span class="p">(</span><span class="n">第二種</span><span class="p">,</span><span class="w"> </span><span class="n">SecondKind</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">第二種</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"○"</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span><span class="err">　</span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">所管</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">summarise</span><span class="p">(</span><span class="n">FirstKindSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">FirstKind</span><span class="p">),</span><span class="w"> </span><span class="n">SecondKindSum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">SecondKind</span><span class="p">))</span><span class="w">
</span><span class="n">g</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">melt</span><span class="p">(</span><span class="n">summarised_group_by_shokan</span><span class="p">),</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">position</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">variable</span><span class="p">))</span><span class="w">
</span><span class="n">g</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">geom_bar</span><span class="p">(</span><span class="n">stat</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"dodge"</span><span class="p">)</span><span class="w">
</span><span class="n">g</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">scale_fill_nejm</span><span class="p">()</span><span class="w">
</span><span class="n">plot</span><span class="p">(</span><span class="n">g</span><span class="p">)</span><span class="w">
</span></code></pre></div></div> <p><a href="/assets/posts/post/2019-12-24-2/summarised_group_by_shokan_plot.png" data-fancybox="images" data-caption="各所管ごとの第一種金融取引業者と第二種金融取引業者の合計数のプロット"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="各所管ごとの第一種金融取引業者と第二種金融取引業者の合計数のプロット" data-src="/assets/posts/post/2019-12-24-2/summarised_group_by_shokan_plot.png" class="lazyload"></a></p> <p>残念ながら日本語が文字化けてしまっています。 ローカル環境ではggplot2の<code class="language-plaintext highlighter-rouge">theme</code>関数を使用することで解決できますが、Colaboratoryでは解決方法がわかりませんでした。</p> <h2 id="終わりに">終わりに</h2> <p>Google ColaboratoryのRランタイムでCSVを操作する方法を紹介しました。 RはPythonのPandas以上の柔軟性があり、統計ライブラリが豊富です。 比較的容易に記述でき、Jupyter Notebookとして記録できるので、チームでデータをシェアする際などに活躍すると思います。</p> <p>Colaboratoryにおける日本語のプロットについて問題を残したままになってしまいました。 もし解決方法ご存じの方いらっしゃいましたらご教示ください。</p> </article> <section class="share"> <a href="//twitter.com/share?text=Google+Colaboratory%E3%81%AER%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%A7CSV%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B&amp;url=https%3A%2F%2Fkenchan0130.github.io%2Fpost%2F2019-12-24-2%3Futm_source%3Dtwitter%26utm_medium%3Dsocial&amp;via=kenchan0130" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255,menubar=no,toolbar=no,resizable=yes');return false;"> <i class="fab fa-twitter fa-lg"></i> </a> <a href="//www.facebook.com/sharer.php?t=Google+Colaboratory%E3%81%AER%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%A7CSV%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B&amp;u=https%3A%2F%2Fkenchan0130.github.io%2Fpost%2F2019-12-24-2%3Futm_source%3Dfacebook%26utm_medium%3Dsocial" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255,menubar=no,toolbar=no,resizable=yes');return false;"> <i class="fab fa-facebook fa-lg"></i> </a> <a href="//b.hatena.ne.jp/entry/panel/?btitle=Google+Colaboratory%E3%81%AER%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%A7CSV%E3%82%92%E6%93%8D%E4%BD%9C%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B&amp;url=https%3A%2F%2Fkenchan0130.github.io%2Fpost%2F2019-12-24-2" onclick="window.open(this.href, 'hatena-share', 'width=550,height=600,menubar=no,toolbar=no,resizable=yes');return false;"> <i class="fab fa-hatena fa-lg"></i> </a> </section> <section class="post-donation"> <div class="post-donation-panel"> <p class="post-donation-description"> 参考になった・面白かったと感じていただけましたら、サポートいただけると励みになります。 </p> <a class="post-donation-button" href="https://www.buymeacoffee.com/kenchan0130" onclick="gtag('event', 'click-buymeacoffee', { event_category: 'www.buymeacoffee.com/kenchan0130', event_label: '/post/2019-12-24-2' });" target="_blank" rel="noopener noreferrer"> <p class="post-donation-button-body"> <img class="icon lazyload" alt="buymeacoffee" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg"> <span class="label">サポートする</span> </p> </a> </div> </section> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2444060431947599" data-ad-slot="7319689305" data-ad-format="auto"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> <section class="sub-contents related-posts"> <div class="sub-contents-wrapper"> <div class="sub-contents-title">あわせて読みたい</div> <div class="sub-contents-main"> <li> <a href="/post/2019-12-24-1">SAML認証が検証可能な開発環境用のIdPを構築</a> <span class="post-date">- December 24, 2019</span> </li> <li> <a href="/post/2020-12-10-1">Session Managerでプライベートネットワークにセキュアにアクセスする環境を構築</a> <span class="post-date">- December 10, 2020</span> </li> <li> <a href="/post/2019-12-23-1">Spring Security SAMLでSpring BootアプリをSAML対応</a> <span class="post-date">- December 23, 2019</span> </li> </div> </div> </section> <section class="sub-contents tags"> <div class="sub-contents-wrapper"> <div class="sub-contents-title">Tags</div> <div class="sub-contents-main"> <a href="/tag/saml">SAML</a> <a href="/tag/docker">Docker</a> <a href="/tag/simplesamlphp">SimpleSAMLphp</a> <a href="/tag/php">PHP</a> </div> </div> </section> </div> </div> </div> <footer class="site-footer"> <div class="wrapper"> <h3 class="footer-heading">kenchan0130 blog</h3> <div class="site-navigation"> <p><strong>Site Map</strong></p> <ul class="pages"> <li class="nav-link"> <a href="/archives">Archives</a> </li> <li class="nav-link"> <a href="/privacy">Privacy Policy</a> </li> <li class="nav-link"> <a href="/profile">Profile</a> </li> <li class="nav-link"> <a href="/profile/resume">Resume</a> </li> </ul> </div> <div class="site-contact"> <p><strong>Contact</strong></p> <ul class="social-media-list"> <li> <a href="https://twitter.com/kenchan0130" title="Follow me on Twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> <span class="username">kenchan0130</span> </a> </li> <li> <a href="https://github.com/kenchan0130" title="Fork me on GitHub" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> <span class="username">kenchan0130</span> </a> </li> </ul> </div> <div class="site-signature"> <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p> <p class="text">ソフトウェアエンジニア。記録に残したいことを雑に備忘するブログ。 投稿内容は個人の見解であり所属する組織の公式見解ではありません。 </p> </div> </div> <div class="licence">このサイトのコンテンツは<a href="https://creativecommons.org/licenses/by/4.0/deed.ja" target="_blank" rel="noopener noreferrer">Creative Commons Attribution 4.0 International (CC-BY-4.0) License</a>の下でライセンスされています。</div> <div class="copyright">Copyright © 2017-2025 Tadayuki Onishi All Rights Reserved.</div> </footer> <script src="/assets/bundle/app.6b4bd929e0a1773ddf90.js" async></script> <script async src="//www.googletagmanager.com/gtag/js?id=G-B7RX34Q5PL"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-B7RX34Q5PL");</script> <script async src="//www.googletagmanager.com/gtag/js?id=UA-79827366-2"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-79827366-2");</script> </body> </html>