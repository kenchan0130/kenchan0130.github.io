<!DOCTYPE html> <html> <!-- This page is used centrarium Jekyll theme Copyright (c) 2015 Ben Centra Released under the MIT license https://github.com/bencentra/centrarium/blob/daa0d16ba9156ad43f9980e2075023a0d48859a5/LICENSE.md --> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"> <title>RailsでJSONのリクエストパラメータがパースできなかった場合の対応</title> <meta name="description" content="Rails製のAPIサーバーで、クライアントから不正なJSONがリクエストパラメータが送られ、パースできなかった問題に遭遇ました。 今回はその対策と調査の記録を残します。"> <meta name="author" content="Tadayuki Onishi"> <meta name="copyright" content="© Tadayuki Onishi 2025"> <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon"> <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon"> <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png"> <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png"> <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png"> <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png"> <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png"> <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png"> <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png"> <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-icon-192x192.png"> <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png"> <link rel="manifest" href="/assets/icons/manifest.json"> <meta name="msapplication-TileColor" content="#ffffff"> <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png"> <meta name="theme-color" content="#ffffff"> <meta property="fb:app_id" content="376889769419405"> <meta property="og:description" content="Rails製のAPIサーバーで、クライアントから不正なJSONがリクエストパラメータが送られ、パースできなかった問題に遭遇ました。 今回はその対策と調査の記録を残します。"> <meta property="og:url" content="https://kenchan0130.github.io/post/2020-07-17-1"> <meta property="og:site_name" content="kenchan0130 blog"> <meta property="og:title" content="RailsでJSONのリクエストパラメータがパースできなかった場合の対応"> <meta property="og:type" content="website"> <meta property="og:author" content="Tadayuki Onishi"> <meta property="og:image" content="https://kenchan0130.github.io/assets/logo.png"> <meta property="og:image:width" content="760"> <meta property="og:image:height" content="760"> <meta property="og:image:type" content="image/png"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="RailsでJSONのリクエストパラメータがパースできなかった場合の対応"> <meta name="twitter:site" content="@kenchan0130"> <meta name="twitter:description" content="Rails製のAPIサーバーで、クライアントから不正なJSONがリクエストパラメータが送られ、パースできなかった問題に遭遇ました。 今回はその対策と調査の記録を残します。"> <meta name="twitter:image" content="https://kenchan0130.github.io/assets/logo.png"> <meta name="twitter:url" content="https://kenchan0130.github.io/post/2020-07-17-1"> <link rel="preload" as="style" href="/assets/bundle/app.55445db2fff8ddfed8c5.css" onload="this.onload=null;this.rel='stylesheet'"> <noscript> <link rel="stylesheet" href="/assets/bundle/app.55445db2fff8ddfed8c5.css"> </noscript> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="https://kenchan0130.github.io/post/2020-07-17-1"> <link rel="alternate" type="application/atom+xml" title="kenchan0130 blog" href="https://kenchan0130.github.io/feed.xml"> <meta name="google-site-verification" content="ZxlKORgZZwZ4TTmaQJFFEXLF3jmd6P_NVU9TEVW1bSg"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> </head> <body> <header class="navigation" role="banner"> <div class="navigation-wrapper"> <a href="/" class="logo"> <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="kenchan0130 blog" data-src="/assets/logo.png" class="lazyload"> </a> <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu"> <i class="fas fa-bars"></i> </a> <nav role="navigation"> <ul id="js-navigation-menu" class="navigation-menu"> <li class="nav-search-box"> <div class="search-input-container"> <input type="search" class="search-input" id="js-search-input" placeholder="Search" autocomplete="off" onfocus="gtag('event', 'search', { event_category: 'www.algolia.com/apps/DEFR5IK9E2/explorer/browse/kenchan0130_blog', event_label: '/post/2020-07-17-1' });"> <i class="fa fa-search search-input-icon"></i> <template id="suggestion-template"> <a href="" onclick="gtag('event', 'click', { event_category: 'www.algolia.com/apps/DEFR5IK9E2/explorer/browse/kenchan0130_blog', event_label: this.href });"> <p class="suggestion-title js-suggestion-title"></p> <p class="suggestion-content js-suggestion-content"></p> </a> </template> </div> </li> <li class="nav-link"> <a href="/archives">Archives</a> </li> <li class="nav-link"> <a href="/profile">Profile</a> </li> </ul> </nav> </div> </header> <div class="page-content"> <div class="post"> <div class="post-header-container "> <div class="scrim "> <header class="post-header"> <h1 class="title">RailsでJSONのリクエストパラメータがパースできなかった場合の対応</h1> </header> </div> </div> <div class="wrapper"> <span class="page-divider"> <span class="one"></span> <span class="two"></span> </span> <section class="post-meta"> <div class="post-date">2020-07-17</div> <div class="post-categories"> <i class="fas fa-fw fa-book"></i> <a href="/category/development">development </a> </div> </section> <article class="post-content"> <p>この記事はQiitaに投稿した内容を一部加筆修正し、移行してきたものです。</p> <p>昨今、フロントエンド（Webやネイティブアプリケーションなど）は巨大化および複雑化しており、HTMLやJavaScript、CSSなどを配信する通常のモノリシックなRailsアプリケーションでは対応が難しくなってきました。 このような状況も相まって、RailsをJSONなどを返すAPIサーバーとして使用するケースが増えてきています。</p> <p>Rails 5以降、<a href="https://github.com/rails-api/rails-api" target="_blank" rel="noopener noreferrer">rails-api</a>がRails本体に取り込まれることになり<sup id="fnref:merged-rails-api"><a href="#fn:merged-rails-api" class="footnote" rel="footnote" role="doc-noteref">1</a></sup>、APIアプリケーションの作成が活発になると思われます。</p> <p>Rails製のAPIサーバーで、クライアントから不正なJSONがリクエストパラメータが送られ、パースできなかった問題に遭遇ました。 今回はその対策と調査の記録を残します。</p> <ul id="markdown-toc"> <li> <a href="#%E5%AF%BE%E5%BF%9C%E6%96%B9%E6%B3%95" id="markdown-toc-対応方法">対応方法</a> <ul> <li><a href="#rails-3%E7%B3%BB%E3%81%8A%E3%82%88%E3%81%B34%E7%B3%BB%E3%81%AE%E5%A0%B4%E5%90%88" id="markdown-toc-rails-3系および4系の場合">Rails 3系および4系の場合</a></li> <li><a href="#rails-5%E4%BB%A5%E9%99%8D%E3%81%AE%E5%A0%B4%E5%90%88" id="markdown-toc-rails-5以降の場合">Rails 5以降の場合</a></li> </ul> </li> <li><a href="#%E7%B5%82%E3%82%8F%E3%82%8A%E3%81%AB" id="markdown-toc-終わりに">終わりに</a></li> </ul> <h2 id="対応方法">対応方法</h2> <p>Rails 3系および4系とRails 5以降で対応方法が異なるため別々に解説していきます。</p> <h3 id="rails-3系および4系の場合">Rails 3系および4系の場合</h3> <p><code class="language-plaintext highlighter-rouge">config/initializers/</code>ディレクトリの<code class="language-plaintext highlighter-rouge">rescue_json_parse_errors.rb</code>ファイルに以下のようなミドルウェアを定義します。 ファイル名およびクラス名はこれにこだわる必要はなく、任意なものでかまいません。</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">RescueJsonParseErrors</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="vi">@app</span> <span class="o">=</span> <span class="n">app</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="k">begin</span>
      <span class="vi">@app</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="k">rescue</span> <span class="no">ActionDispatch</span><span class="o">::</span><span class="no">ParamsParser</span><span class="o">::</span><span class="no">ParseError</span> <span class="o">=&gt;</span> <span class="n">_e</span>
      <span class="k">return</span> <span class="p">[</span>
        <span class="mi">400</span><span class="p">,</span> <span class="p">{</span> <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span> <span class="p">},</span>
        <span class="p">[{</span> <span class="ss">error: </span><span class="s1">'There was a problem in the your JSON'</span> <span class="p">}.</span><span class="nf">to_json</span><span class="p">]</span>
      <span class="p">]</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>ちなみにRails 3系の場合の場合は、以下のようにします。</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">RescueJsonParseErrors</span>
  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
    <span class="vi">@app</span> <span class="o">=</span> <span class="n">app</span>
  <span class="k">end</span>

  <span class="k">def</span> <span class="nf">call</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="k">begin</span>
      <span class="vi">@app</span><span class="p">.</span><span class="nf">call</span><span class="p">(</span><span class="n">env</span><span class="p">)</span>
    <span class="k">rescue</span> <span class="no">MultiJson</span><span class="o">::</span><span class="no">LoadError</span> <span class="o">=&gt;</span> <span class="n">_e</span>
      <span class="k">return</span> <span class="p">[</span>
        <span class="mi">400</span><span class="p">,</span> <span class="p">{</span> <span class="s1">'Content-Type'</span> <span class="o">=&gt;</span> <span class="s1">'application/json'</span> <span class="p">},</span>
        <span class="p">[{</span> <span class="ss">error: </span><span class="s1">'There was a problem in the your JSON'</span> <span class="p">}.</span><span class="nf">to_json</span><span class="p">]</span>
      <span class="p">]</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">env</code>はRackの<code class="language-plaintext highlighter-rouge">env</code>であるため、<code class="language-plaintext highlighter-rouge">env['HTTP_ACCEPT']</code>の内容をもとにレスポンスの<code class="language-plaintext highlighter-rouge">Content-Type</code>を変更したり、原因となったアクセス元であるRemote IPなどをログ出力したりできます。</p> <p>その後、<code class="language-plaintext highlighter-rouge">config/application.rb</code>ファイルに、先程定義したミドルウェアを差し込む処理を追加します。</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">MyApp</span>
  <span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Application</span>
    <span class="c1"># パラメータをパースするミドルウェアの前に独自のミドルウェアのクラス名を文字列で差し込む</span>
    <span class="n">config</span><span class="p">.</span><span class="nf">middleware</span><span class="p">.</span><span class="nf">insert_before</span> <span class="no">ActionDispatch</span><span class="o">::</span><span class="no">ParamsParser</span><span class="p">,</span> <span class="s1">'RescueJsonParseErrors'</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>このようにすることで、リクエストのJSONパースができなかった場合、HTTP statusを<code class="language-plaintext highlighter-rouge">400</code>としつつJSONを返却できます。</p> <h4 id="なぜcontrollerで例外を捕捉しないのか">なぜControllerで例外を捕捉しないのか</h4> <p>そもそもなぜこのような対応が必要なのでしょうか。</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">rescue_from</span> <span class="no">ActionDispatch</span><span class="o">::</span><span class="no">ParamsParser</span><span class="o">::</span><span class="no">ParseError</span> <span class="k">do</span>
     <span class="n">render</span> <span class="ss">json: </span><span class="p">{</span> <span class="ss">message: </span><span class="s1">'There was a problem in the your JSON'</span> <span class="p">},</span> <span class="ss">status: </span><span class="mi">400</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>Railsで発生する例外を共通的に処理するのであれば、上記のようにControllerの基底クラスで例外を捕捉すればよいと思われるかもしれません。</p> <p>しかし、上記のコードで同様の事象を再現しても例外は捕捉されません。 これはControllerで使用している<code class="language-plaintext highlighter-rouge">params</code>のパース処理がControllerの処理に到達する前のミドルウェア層で行われており<sup id="fnref:params-parser-rails4"><a href="#fn:params-parser-rails4" class="footnote" rel="footnote" role="doc-noteref">2</a></sup> <sup id="fnref:params-parser-rails3"><a href="#fn:params-parser-rails3" class="footnote" rel="footnote" role="doc-noteref">3</a></sup>、そのタイミングで例外が発生してしまいます。</p> <h4 id="ハマったところ">ハマったところ</h4> <p><code class="language-plaintext highlighter-rouge">config/application.rb</code>にミドルウェアの差し込みを行う際、</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">module</span> <span class="nn">MyApp</span>
  <span class="k">class</span> <span class="nc">Application</span> <span class="o">&lt;</span> <span class="no">Rails</span><span class="o">::</span><span class="no">Application</span>
    <span class="n">config</span><span class="p">.</span><span class="nf">middleware</span><span class="p">.</span><span class="nf">insert_before</span> <span class="no">ActionDispatch</span><span class="o">::</span><span class="no">ParamsParser</span><span class="p">,</span> <span class="no">RescueJsonParseErrors</span><span class="p">.</span><span class="nf">to_s</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>上記のようにクラスを評価しつつ文字列可すると<code class="language-plaintext highlighter-rouge">uninitialized constant RescueJsonParseErrors</code>となってしまいました。</p> <p>これは、<code class="language-plaintext highlighter-rouge">config/application.rb</code>が読み込まれた後に<code class="language-plaintext highlighter-rouge">initializers</code> のファイルが読み込まれることが原因です。</p> <p>そのため、クラス名の文字列にするか、<code class="language-plaintext highlighter-rouge">config/application.rb</code>で <code class="language-plaintext highlighter-rouge">RescueJsonParseErrors</code>クラスを定義してあるファイルを明示的に<code class="language-plaintext highlighter-rouge">require</code>する必要があります。</p> <h4 id="gemでの解決">gemでの解決</h4> <p>解決可能なgemを調べたところ、</p> <ul> <li><a href="https://rubygems.org/gems/rack_middleware_json_error_msg" target="_blank" rel="noopener noreferrer">rack_middleware_json_error_msg</a></li> <li><a href="https://rubygems.org/gems/catch_json_parse_errors" target="_blank" rel="noopener noreferrer">catch_json_parse_errors</a></li> </ul> <p>の2つが見つかりました。 しかし執筆現在、それぞれのgemはメンテナンスが行われていないため、適切に判断して使用することをお勧めします。</p> <h3 id="rails-5以降の場合">Rails 5以降の場合</h3> <p>Rails 5系では、このあたりの処理に修正が入り、Controllerでリクエストパラメータのパース例外を捕捉できるようになりました。</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Rails 5.2.2未満</span>
<span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>
  <span class="k">def</span> <span class="nf">process_action</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
      <span class="k">super</span>
  <span class="k">rescue</span> <span class="no">ActionDispatch</span><span class="o">::</span><span class="no">Http</span><span class="o">::</span><span class="no">Parameters</span><span class="o">::</span><span class="no">ParseError</span> <span class="o">=&gt;</span> <span class="n">_e</span>
    <span class="n">render</span> <span class="ss">status: </span><span class="mi">400</span><span class="p">,</span> <span class="ss">json: </span><span class="p">{</span> <span class="ss">message: </span><span class="s1">'There was a problem in the your JSON'</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># Rails 5.2.2以上</span>
<span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">ActionController</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">rescue_from</span> <span class="no">ActionDispatch</span><span class="o">::</span><span class="no">Http</span><span class="o">::</span><span class="no">Parameters</span><span class="o">::</span><span class="no">ParseError</span> <span class="k">do</span> <span class="o">|</span><span class="n">_e</span><span class="o">|</span>
    <span class="n">render</span> <span class="ss">status: </span><span class="mi">400</span><span class="p">,</span> <span class="ss">json: </span><span class="p">{</span> <span class="ss">message: </span><span class="s1">'There was a problem in the your JSON'</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>Rails 5.0.0において<code class="language-plaintext highlighter-rouge">ActionDispatch::ParamsParser::ParseError</code>は非推奨となり、5.2.0で削除されました。 そのため、代替となる<code class="language-plaintext highlighter-rouge">ActionDispatch::Http::Parameters::ParseError</code>を使用しています。</p> <h2 id="終わりに">終わりに</h2> <p>このような処理を追加すると、どのような恩恵が得られるのでしょうか。ログインを行うAPIを提供するケースを考えてみましょう。</p> <p>何かしらの理由でリクエストのJSONのパラメータがパースできなかった場合、<code class="language-plaintext highlighter-rouge">ActionDispatch::Http::FilterParameters</code>が適用されずメールアドレスやパスワードなどが平分でログに出力される自体が考えられます。 この処理を適用することで、リクエストパラメータの漏洩事故を防ぐことができます。</p> <p>これに限らず、サーバーはクライアントからのリクエストは信頼すべきではないため、適切にバリデーション処理を入れるべきでしょう。</p> <div class="footnotes" role="doc-endnotes"> <ol> <li id="fn:merged-rails-api"> <p><a href="https://github.com/rails/rails/pull/19832" target="_blank" rel="noopener noreferrer">Rails api by dhh · Pull Request #19832 · rails/rails</a> <a href="#fnref:merged-rails-api" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:params-parser-rails4"> <p><a href="https://github.com/rails/rails/blob/4-2-stable/actionpack/lib/action_dispatch/middleware/params_parser.rb#L43-L46" target="_blank" rel="noopener noreferrer">Rails 4.2系のリクエストパラメータの処理箇所</a> <a href="#fnref:params-parser-rails4" class="reversefootnote" role="doc-backlink">↩</a></p> </li> <li id="fn:params-parser-rails3"> <p><a href="https://github.com/rails/rails/blob/3-2-stable/actionpack/lib/action_dispatch/middleware/params_parser.rb#L46-L50" target="_blank" rel="noopener noreferrer">Rails 3.2系のリクエストパラメータの処理箇所</a> <a href="#fnref:params-parser-rails3" class="reversefootnote" role="doc-backlink">↩</a></p> </li> </ol> </div> </article> <section class="share"> <a href="//twitter.com/share?text=Rails%E3%81%A7JSON%E3%81%AE%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%81%8C%E3%83%91%E3%83%BC%E3%82%B9%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88%E3%81%AE%E5%AF%BE%E5%BF%9C&amp;url=https%3A%2F%2Fkenchan0130.github.io%2Fpost%2F2020-07-17-1%3Futm_source%3Dtwitter%26utm_medium%3Dsocial&amp;via=kenchan0130" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255,menubar=no,toolbar=no,resizable=yes');return false;"> <i class="fab fa-twitter fa-lg"></i> </a> <a href="//www.facebook.com/sharer.php?t=Rails%E3%81%A7JSON%E3%81%AE%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%81%8C%E3%83%91%E3%83%BC%E3%82%B9%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88%E3%81%AE%E5%AF%BE%E5%BF%9C&amp;u=https%3A%2F%2Fkenchan0130.github.io%2Fpost%2F2020-07-17-1%3Futm_source%3Dfacebook%26utm_medium%3Dsocial" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255,menubar=no,toolbar=no,resizable=yes');return false;"> <i class="fab fa-facebook fa-lg"></i> </a> <a href="//b.hatena.ne.jp/entry/panel/?btitle=Rails%E3%81%A7JSON%E3%81%AE%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%81%8C%E3%83%91%E3%83%BC%E3%82%B9%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F%E5%A0%B4%E5%90%88%E3%81%AE%E5%AF%BE%E5%BF%9C&amp;url=https%3A%2F%2Fkenchan0130.github.io%2Fpost%2F2020-07-17-1" onclick="window.open(this.href, 'hatena-share', 'width=550,height=600,menubar=no,toolbar=no,resizable=yes');return false;"> <i class="fab fa-hatena fa-lg"></i> </a> </section> <section class="post-donation"> <div class="post-donation-panel"> <p class="post-donation-description"> 参考になった・面白かったと感じていただけましたら、サポートいただけると励みになります。 </p> <a class="post-donation-button" href="https://www.buymeacoffee.com/kenchan0130" onclick="gtag('event', 'click-buymeacoffee', { event_category: 'www.buymeacoffee.com/kenchan0130', event_label: '/post/2020-07-17-1' });" target="_blank" rel="noopener noreferrer"> <p class="post-donation-button-body"> <img class="icon lazyload" alt="buymeacoffee" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg"> <span class="label">サポートする</span> </p> </a> </div> </section> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2444060431947599" data-ad-slot="7319689305" data-ad-format="auto"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> <section class="sub-contents related-posts"> <div class="sub-contents-wrapper"> <div class="sub-contents-title">あわせて読みたい</div> <div class="sub-contents-main"> <li> <a href="/post/2020-07-07-1">Rails 5アップグレードへの道</a> <span class="post-date">- July 7, 2020</span> </li> <li> <a href="/post/2018-07-30-1">Jekyllの画像遅延ロードのためのライブラリを作った</a> <span class="post-date">- July 30, 2018</span> </li> </div> </div> </section> <section class="sub-contents tags"> <div class="sub-contents-wrapper"> <div class="sub-contents-title">Tags</div> <div class="sub-contents-main"> <a href="/tag/ruby">Ruby</a> <a href="/tag/rails">Rails</a> </div> </div> </section> </div> </div> </div> <footer class="site-footer"> <div class="wrapper"> <h3 class="footer-heading">kenchan0130 blog</h3> <div class="site-navigation"> <p><strong>Site Map</strong></p> <ul class="pages"> <li class="nav-link"> <a href="/archives">Archives</a> </li> <li class="nav-link"> <a href="/privacy">Privacy Policy</a> </li> <li class="nav-link"> <a href="/profile">Profile</a> </li> <li class="nav-link"> <a href="/profile/resume">Resume</a> </li> </ul> </div> <div class="site-contact"> <p><strong>Contact</strong></p> <ul class="social-media-list"> <li> <a href="https://twitter.com/kenchan0130" title="Follow me on Twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> <span class="username">kenchan0130</span> </a> </li> <li> <a href="https://github.com/kenchan0130" title="Fork me on GitHub" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> <span class="username">kenchan0130</span> </a> </li> </ul> </div> <div class="site-signature"> <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p> <p class="text">ソフトウェアエンジニア。記録に残したいことを雑に備忘するブログ。 投稿内容は個人の見解であり所属する組織の公式見解ではありません。 </p> </div> </div> <div class="licence">このサイトのコンテンツは<a href="https://creativecommons.org/licenses/by/4.0/deed.ja" target="_blank" rel="noopener noreferrer">Creative Commons Attribution 4.0 International (CC-BY-4.0) License</a>の下でライセンスされています。</div> <div class="copyright">Copyright © 2017-2025 Tadayuki Onishi All Rights Reserved.</div> </footer> <script src="/assets/bundle/app.55445db2fff8ddfed8c5.js" async></script> <script async src="//www.googletagmanager.com/gtag/js?id=G-B7RX34Q5PL"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-B7RX34Q5PL");</script> <script async src="//www.googletagmanager.com/gtag/js?id=UA-79827366-2"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-79827366-2");</script> </body> </html>