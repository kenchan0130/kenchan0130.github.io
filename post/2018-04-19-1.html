<!DOCTYPE html> <html> <!-- This page is used centrarium Jekyll theme Copyright (c) 2015 Ben Centra Released under the MIT license https://github.com/bencentra/centrarium/blob/daa0d16ba9156ad43f9980e2075023a0d48859a5/LICENSE.md --> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"> <title>Confluenceユーザーマクロのすゝめ</title> <meta name="description" content="IT企業にはおなじみの Atlassian社のConfluence。 有料プラグインも豊富ですが、人数に比例して課金されるため、使用しない人数分のライセンス費用も払わないといけないとなりどんどん導入が難しくなってくることもあります。 今回はちょっとしたプラグインであれば、お金をかけずに拡張できるユーザーマクロを紹介します。"> <meta name="author" content="Tadayuki Onishi"> <meta name="copyright" content="© Tadayuki Onishi 2025"> <link rel="shortcut icon" href="/assets/icons/favicon.ico" type="image/x-icon"> <link rel="icon" href="/assets/icons/favicon.ico" type="image/x-icon"> <link rel="apple-touch-icon" sizes="57x57" href="/assets/icons/apple-icon-57x57.png"> <link rel="apple-touch-icon" sizes="60x60" href="/assets/icons/apple-icon-60x60.png"> <link rel="apple-touch-icon" sizes="72x72" href="/assets/icons/apple-icon-72x72.png"> <link rel="apple-touch-icon" sizes="76x76" href="/assets/icons/apple-icon-76x76.png"> <link rel="apple-touch-icon" sizes="114x114" href="/assets/icons/apple-icon-114x114.png"> <link rel="apple-touch-icon" sizes="120x120" href="/assets/icons/apple-icon-120x120.png"> <link rel="apple-touch-icon" sizes="144x144" href="/assets/icons/apple-icon-144x144.png"> <link rel="apple-touch-icon" sizes="152x152" href="/assets/icons/apple-icon-152x152.png"> <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-icon-180x180.png"> <link rel="icon" type="image/png" sizes="192x192" href="/assets/icons/android-icon-192x192.png"> <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="96x96" href="/assets/icons/favicon-96x96.png"> <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png"> <link rel="manifest" href="/assets/icons/manifest.json"> <meta name="msapplication-TileColor" content="#ffffff"> <meta name="msapplication-TileImage" content="/assets/icons/ms-icon-144x144.png"> <meta name="theme-color" content="#ffffff"> <meta property="fb:app_id" content="376889769419405"> <meta property="og:description" content="IT企業にはおなじみの Atlassian社のConfluence。 有料プラグインも豊富ですが、人数に比例して課金されるため、使用しない人数分のライセンス費用も払わないといけないとなりどんどん導入が難しくなってくることもあります。 今回はちょっとしたプラグインであれば、お金をかけずに拡張できるユーザーマクロを紹介します。"> <meta property="og:url" content="https://kenchan0130.github.io/post/2018-04-19-1"> <meta property="og:site_name" content="kenchan0130 blog"> <meta property="og:title" content="Confluenceユーザーマクロのすゝめ"> <meta property="og:type" content="website"> <meta property="og:author" content="Tadayuki Onishi"> <meta property="og:image" content="https://kenchan0130.github.io/assets/logo.png"> <meta property="og:image:width" content="760"> <meta property="og:image:height" content="760"> <meta property="og:image:type" content="image/png"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="Confluenceユーザーマクロのすゝめ"> <meta name="twitter:site" content="@kenchan0130"> <meta name="twitter:description" content="IT企業にはおなじみの Atlassian社のConfluence。 有料プラグインも豊富ですが、人数に比例して課金されるため、使用しない人数分のライセンス費用も払わないといけないとなりどんどん導入が難しくなってくることもあります。 今回はちょっとしたプラグインであれば、お金をかけずに拡張できるユーザーマクロを紹介します。"> <meta name="twitter:image" content="https://kenchan0130.github.io/assets/logo.png"> <meta name="twitter:url" content="https://kenchan0130.github.io/post/2018-04-19-1"> <link rel="preload" as="style" href="/assets/bundle/app.6b4bd929e0a1773ddf90.css" onload="this.onload=null;this.rel='stylesheet'"> <noscript> <link rel="stylesheet" href="/assets/bundle/app.6b4bd929e0a1773ddf90.css"> </noscript> <link rel="stylesheet" href="/css/main.css"> <link rel="canonical" href="https://kenchan0130.github.io/post/2018-04-19-1"> <link rel="alternate" type="application/atom+xml" title="kenchan0130 blog" href="https://kenchan0130.github.io/feed.xml"> <meta name="google-site-verification" content="ZxlKORgZZwZ4TTmaQJFFEXLF3jmd6P_NVU9TEVW1bSg"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> </head> <body> <header class="navigation" role="banner"> <div class="navigation-wrapper"> <a href="/" class="logo"> <img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="kenchan0130 blog" data-src="/assets/logo.png" class="lazyload"> </a> <a href="javascript:void(0)" class="navigation-menu-button" id="js-mobile-menu"> <i class="fas fa-bars"></i> </a> <nav role="navigation"> <ul id="js-navigation-menu" class="navigation-menu"> <li class="nav-search-box"> <div class="search-input-container"> <input type="search" class="search-input" id="js-search-input" placeholder="Search" autocomplete="off" onfocus="gtag('event', 'search', { event_category: 'www.algolia.com/apps/DEFR5IK9E2/explorer/browse/kenchan0130_blog', event_label: '/post/2018-04-19-1' });"> <i class="fa fa-search search-input-icon"></i> <template id="suggestion-template"> <a href="" onclick="gtag('event', 'click', { event_category: 'www.algolia.com/apps/DEFR5IK9E2/explorer/browse/kenchan0130_blog', event_label: this.href });"> <p class="suggestion-title js-suggestion-title"></p> <p class="suggestion-content js-suggestion-content"></p> </a> </template> </div> </li> <li class="nav-link"> <a href="/archives">Archives</a> </li> <li class="nav-link"> <a href="/profile">Profile</a> </li> </ul> </nav> </div> </header> <div class="page-content"> <div class="post"> <div class="post-header-container "> <div class="scrim "> <header class="post-header"> <h1 class="title">Confluenceユーザーマクロのすゝめ</h1> </header> </div> </div> <div class="wrapper"> <span class="page-divider"> <span class="one"></span> <span class="two"></span> </span> <section class="post-meta"> <div class="post-date">2018-04-19</div> <div class="post-categories"> <i class="fas fa-fw fa-book"></i> <a href="/category/system-administration">system-administration </a> </div> </section> <article class="post-content"> <p>みなさんの職場では、社内wikiやドキュメントツールは何を使用されていますでしょうか。</p> <ul> <li><a href="https://site.crowi.wiki/" target="_blank" rel="noopener noreferrer">Crowi</a></li> <li><a href="https://esa.io/" target="_blank" rel="noopener noreferrer">esa</a></li> <li><a href="https://kibe.la/ja" target="_blank" rel="noopener noreferrer">Kibela</a></li> <li><a href="https://teams.qiita.com/" target="_blank" rel="noopener noreferrer">Qiita:Team</a></li> </ul> <p>などMarkdownで書けてコラボレーションが可能なツールが出てきていますが、 その中でも昔から根強い人気を誇るのがAtlassian製のConfluenceです。</p> <p>日本語検索が貧弱だったり、ドキュメント自体がプラグインを入れないと暗号化できなかったりといろいろつらかったりしますが、 非エンジニアでも使える、マクロが豊富であるなどがあり選択されているところも多いかと思います。</p> <p>しかし、そのマクロも有料版になると課金がユーザー数分跳ね上がり経費が多くかかることもあります。</p> <p>今回はちょっとしたプラグインであれば、お金をかけずに拡張できるユーザーマクロを実例と交えて紹介していきます。</p> <ul id="markdown-toc"> <li><a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%A8%E3%81%AF" id="markdown-toc-ユーザーマクロとは">ユーザーマクロとは</a></li> <li> <a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%83%9E%E3%82%AF%E3%83%AD%E3%82%92%E4%BD%9C%E6%88%90%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95" id="markdown-toc-ユーザーマクロを作成する方法">ユーザーマクロを作成する方法</a> <ul> <li><a href="#macro-body-processing" id="markdown-toc-macro-body-processing">Macro Body Processing</a></li> <li><a href="#template" id="markdown-toc-template">Template</a></li> </ul> </li> <li> <a href="#%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E4%BE%8B" id="markdown-toc-ユーザーマクロの例">ユーザーマクロの例</a> <ul> <li><a href="#%E3%83%86%E3%83%B3%E3%83%97%E3%83%AC%E3%83%BC%E3%83%88%E3%81%AE%E6%BA%96%E5%82%99" id="markdown-toc-テンプレートの準備">テンプレートの準備</a></li> <li><a href="#%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E7%99%BB%E9%8C%B2" id="markdown-toc-マクロの登録">マクロの登録</a></li> </ul> </li> <li><a href="#%E3%81%BE%E3%81%A8%E3%82%81" id="markdown-toc-まとめ">まとめ</a></li> </ul> <h2 id="ユーザーマクロとは">ユーザーマクロとは</h2> <p><a href="https://developer.atlassian.com/server/confluence/confluence-user-macro-guide/" target="_blank" rel="noopener noreferrer">本家</a>のドキュメントにも記載されていますが、ユーザーマクロとは独自のカスタムマクロであり、特定のアクションの実行やカスタムの初期設定を適用するなどの操作が可能となります。</p> <p>ユーザーマクロの作成や編集などの管理には、システム管理者権限が必要となります。</p> <h2 id="ユーザーマクロを作成する方法">ユーザーマクロを作成する方法</h2> <ol> <li>右上にある歯車マーク &gt; 一般設定 &gt; ユーザー マクロに移動します。</li> <li>ユーザーマクロの作成を選択します。</li> <li>マクロの詳細を入力します。</li> <li>追加をクリックします。</li> </ol> <p>上記の作業をするだけで作成できます。 設定すべき項目がいくつかありますが、特に重要なのが</p> <ul> <li>Macro Body Processing</li> <li>Template</li> </ul> <p>の2つです。</p> <h3 id="macro-body-processing">Macro Body Processing</h3> <p>そもそもマクロ本文とは、ユーザーがマクロを選択した際に、ユーザーが入力する本文のコンテンツのことです。</p> <p><a href="/assets/posts/post/2018-04-19-1/macro_body_example.png" data-fancybox="images" data-caption="マクロ本文の例"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="マクロ本文の例" data-src="/assets/posts/post/2018-04-19-1/macro_body_example.png" class="lazyload"></a></p> <h4 id="no-macro-body">No macro body</h4> <p>マクロ本文が必要ない際に使用します。</p> <p><a href="/assets/posts/post/2018-04-19-1/no_macro_body_example.png" data-fancybox="images" data-caption="マクロ本文なしの例"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="マクロ本文なしの例" data-src="/assets/posts/post/2018-04-19-1/no_macro_body_example.png" class="lazyload"></a></p> <h4 id="escaped">Escaped</h4> <p>マクロ本文のHTMLをエスケープする際に設定します。</p> <p><a href="/assets/posts/post/2018-04-19-1/macro_body_escape_image.png" data-fancybox="images" data-caption="エスケープ済みのイメージ1"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="エスケープ済みのイメージ1" data-src="/assets/posts/post/2018-04-19-1/macro_body_escape_image.png" class="lazyload"></a> <a href="/assets/posts/post/2018-04-19-1/macro_body_escape_image_rendered.png" data-fancybox="images" data-caption="エスケープ済みのイメージ2"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="エスケープ済みのイメージ2" data-src="/assets/posts/post/2018-04-19-1/macro_body_escape_image_rendered.png" class="lazyload"></a></p> <p>上記の場合ですと、<code class="language-plaintext highlighter-rouge">b</code> タグがエスケープされないと太字になってしまいますが、エスケープすることによってそのまま表示されます。</p> <h4 id="unrendered">Unrendered</h4> <p>マクロ本文に記載されたHTMLがテンプレートの部分で処理する際にはまだレンダリングされていない状態で使用できます。</p> <h4 id="rendered">Rendered</h4> <p>マクロ本文に記載されたHTMLが適宜レンダリングされます。</p> <h3 id="template">Template</h3> <p>マクロの動作を司るコードを設定できます。 実態は <a href="https://velocity.apache.org/" target="_blank" rel="noopener noreferrer">Velocity</a> のテンプレートとなっています。</p> <p>マクロ本文が存在する場合、 <code class="language-plaintext highlighter-rouge">$body</code> という変数で参照できます。</p> <h4 id="templateのベストプラクティス">Templateのベストプラクティス</h4> <p><a href="https://confluence.atlassian.com/doc/writing-user-macros-4485.html" target="_blank" rel="noopener noreferrer">Writing User Macros</a> においても記載されていますが、 テンプレートはコードですので、テンプレートがどの環境・設定で動作を想定しているのかをテンプレートのヘッダに記載しましょう。</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Macro title: マクロタイトル
## Description: A container within which to group AUI Tabs
## Categories: Confluence content
## Macro has a body: Y or N
## Body processing: Rendered
##
## Developed by: kenchan0130
## Date created: 2018/04/09
## Confluence version: 3.5
## Installed by: kenchan0130
</code></pre></div></div> <h2 id="ユーザーマクロの例">ユーザーマクロの例</h2> <p>実際に作ってみないとわからないので、Confluenceに標準では入っていないタブの機能を用意してみましょう。</p> <h3 id="テンプレートの準備">テンプレートの準備</h3> <p>ベストプラクティスには書かれていませんでしたが、挿入するマクロのメインの親要素には</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#set( $id = $action.dateFormatter.calendar.timeInMillis )
</code></pre></div></div> <p>上記のようにIDを付与することをオススメします。 なぜなら、エンドユーザーは定義したマクロを1ページ中に複数回使用する可能性があり、 一意特定できなくなってしまうと、セレクタなどがうまく動かずバグになってしまう可能性があるためです。</p> <h4 id="タブの中身">タブの中身</h4> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Macro name: tab-content
## Macro title: Tab Content
## Description: A Tab content for Tabs Container
## Categories: Confluence content
## Macro has a body: Y
## Body processing: Rendered
##
## Developed by: kenchan0130
## Date created: 2018-04-15
## Installed by: kenchan0130
##
## @param TabName:title=TabName|type=string|required=true|desc=Please input tab name.

#set( $id = $action.dateFormatter.calendar.timeInMillis )

<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"js-tabs-pane"</span> <span class="na">id=</span><span class="s">"tab-$id"</span> <span class="na">data-name=</span><span class="s">"$paramTabName"</span><span class="nt">&gt;</span>
$body
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">@param</code> というのは、マクロの挿入時に渡せるパラメータです。 テンプレート内では、 <code class="language-plaintext highlighter-rouge">$param定義した名前</code> で参照できます。 また、複数パラメータも用意できます。 詳しくは <a href="https://confluence.atlassian.com/doc/user-macro-template-syntax-223906130.html" target="_blank" rel="noopener noreferrer">User Macro Template Syntax</a> を御覧ください。</p> <h4 id="タブ全体のコンテナ">タブ全体のコンテナ</h4> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>## Macro name: tabs-container
## Macro title: Tabs Container
## Description: A container within which to group Tabs
## Categories: Confluence content
## Macro has a body: Y
## Body processing: Rendered
##
## Developed by: kenchan0130
## Date created: 2018-04-15
## Installed by: kenchan0130
##
## @noparams

#set( $uniqueId = $action.dateFormatter.calendar.timeInMillis )

<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"tabs-$uniqueId"</span> <span class="na">class=</span><span class="s">"dvdsmpsn user-macro aui-tabs horizontal-tabs"</span><span class="nt">&gt;</span>
$body
<span class="nt">&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>
<span class="nx">AJS</span><span class="p">.</span><span class="nf">toInit</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">jQuery</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">tabsContainer</span> <span class="o">=</span> <span class="nf">jQuery</span><span class="p">(</span><span class="dl">'</span><span class="s1">#tabs-$uniqueId</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">tabsContainer</span><span class="p">.</span><span class="nx">prepend</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;ul class="tabs-menu"&gt;&lt;/ul&gt;</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">tabsContainerFirstUl</span> <span class="o">=</span> <span class="nx">tabsContainer</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">ul:first</span><span class="dl">'</span><span class="p">);</span>

  <span class="nx">tabsContainer</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.js-tabs-pane</span><span class="dl">'</span><span class="p">).</span><span class="nf">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">tabLabel</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;a&gt;</span><span class="dl">'</span><span class="p">).</span><span class="nf">attr</span><span class="p">({</span>
      <span class="na">href</span><span class="p">:</span> <span class="dl">'</span><span class="s1">#</span><span class="dl">'</span> <span class="o">+</span> <span class="nf">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nf">attr</span><span class="p">(</span><span class="dl">'</span><span class="s1">id</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">}).</span><span class="nf">text</span><span class="p">(</span><span class="nf">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nf">data</span><span class="p">(</span><span class="dl">'</span><span class="s1">name</span><span class="dl">'</span><span class="p">));</span>
    <span class="kd">var</span> <span class="nx">tabLi</span> <span class="o">=</span> <span class="nx">jQuery</span><span class="p">(</span><span class="dl">'</span><span class="s1">&lt;li&gt;</span><span class="dl">'</span><span class="p">).</span><span class="nf">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">js-menu-item</span><span class="dl">'</span><span class="p">).</span><span class="nf">append</span><span class="p">(</span><span class="nx">tabLabel</span><span class="p">);</span>
    <span class="nx">tabsContainerFirstUl</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="nx">tabLi</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">tabsContainer</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">li.js-menu-item:first</span><span class="dl">'</span><span class="p">).</span><span class="nf">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">active-tab</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">tabsContainer</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.js-tabs-pane:first</span><span class="dl">'</span><span class="p">).</span><span class="nf">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">active-pane</span><span class="dl">'</span><span class="p">);</span>

  <span class="nx">tabsContainer</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">.js-menu-item</span><span class="dl">'</span><span class="p">).</span><span class="nf">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nf">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">active-tab</span><span class="dl">'</span><span class="p">).</span><span class="nf">siblings</span><span class="p">().</span><span class="nf">removeClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">active-tab</span><span class="dl">'</span><span class="p">);</span>
    <span class="nf">jQuery</span><span class="p">(</span><span class="nf">jQuery</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nf">find</span><span class="p">(</span><span class="dl">'</span><span class="s1">a:first</span><span class="dl">'</span><span class="p">).</span><span class="nf">attr</span><span class="p">(</span><span class="dl">'</span><span class="s1">href</span><span class="dl">'</span><span class="p">)).</span><span class="nf">addClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">active-pane</span><span class="dl">'</span><span class="p">).</span><span class="nf">siblings</span><span class="p">().</span><span class="nf">removeClass</span><span class="p">(</span><span class="dl">'</span><span class="s1">active-pane</span><span class="dl">'</span><span class="p">);</span>
    <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">});</span>

  <span class="nx">AJS</span><span class="p">.</span><span class="nx">tabs</span><span class="p">.</span><span class="nf">setup</span><span class="p">();</span>
<span class="p">});</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></div> <p>パラメータがある場合は <code class="language-plaintext highlighter-rouge">@param</code> を記載していましたが、パラメータが必要ない場合は <code class="language-plaintext highlighter-rouge">@noparam</code> を指定しましょう。 細かい挙動に関してはJavaScriptの話ですので、ここでは割愛します。</p> <p>また、 <strong>AJS</strong> というConfluenceがjQueryなどをラップしたオブジェクトを用意しており、 Confluenceを拡張する際に使用できます。</p> <h3 id="マクロの登録">マクロの登録</h3> <p>ベストプラクティス通り、コメント設定すべき内容がテンプレートにほぼ記載されているため、 内容を確認しつつマクロを登録していきます。</p> <p><a href="/assets/posts/post/2018-04-19-1/create_user_macro_browser.png" data-fancybox="images" data-caption="ユーザーマクロブラウザの作成"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="ユーザーマクロブラウザの作成" data-src="/assets/posts/post/2018-04-19-1/create_user_macro_browser.png" class="lazyload"></a></p> <p>アイコンのURLを指定しておくと、ユーザーマクロを選択する際に視認性が増す効果があります。</p> <p><a href="/assets/posts/post/2018-04-19-1/user_macro_setting.png" data-fancybox="images" data-caption="ユーザーマクロの設定"><img src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="ユーザーマクロの設定" data-src="/assets/posts/post/2018-04-19-1/user_macro_setting.png" class="lazyload"></a></p> <p>設定項目を入れたら、最後はテンプレートを挿入して保存ボタンを押すとマクロの作成が完了です。</p> <p>まずは、マクロブラウザの設定項目の <strong>マクロブラウザは管理者のみ表示されます</strong> を選択して、管理者のみで挙動を確認して、確認が終了したら <strong>マクロブラウザですべてのユーザーに表示されます</strong> を選択してエンドユーザーに使用可能になった旨を通知すると良いと思います。</p> <h2 id="まとめ">まとめ</h2> <p>Confluenceのユーザーマクロについて紹介しました。 Webの技術がほぼすべて使用できるので、拡張性は無限大です。</p> <p>ユーザーマクロを使用することでコスト削減が可能となります。 もちろんメンテナンスなど工数がかさむ可能性もあるため、機能によっては有料のプラグインを入れることも検討しましょう。</p> <p>ぜひステキなConfluence生活を送っていきましょう。</p> </article> <section class="share"> <a href="//twitter.com/share?text=Confluence%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E3%81%99%E3%82%9D%E3%82%81&amp;url=https%3A%2F%2Fkenchan0130.github.io%2Fpost%2F2018-04-19-1%3Futm_source%3Dtwitter%26utm_medium%3Dsocial&amp;via=kenchan0130" onclick="window.open(this.href, 'twitter-share', 'width=550,height=255,menubar=no,toolbar=no,resizable=yes');return false;"> <i class="fab fa-twitter fa-lg"></i> </a> <a href="//www.facebook.com/sharer.php?t=Confluence%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E3%81%99%E3%82%9D%E3%82%81&amp;u=https%3A%2F%2Fkenchan0130.github.io%2Fpost%2F2018-04-19-1%3Futm_source%3Dfacebook%26utm_medium%3Dsocial" onclick="window.open(this.href, 'facebook-share', 'width=550,height=255,menubar=no,toolbar=no,resizable=yes');return false;"> <i class="fab fa-facebook fa-lg"></i> </a> <a href="//b.hatena.ne.jp/entry/panel/?btitle=Confluence%E3%83%A6%E3%83%BC%E3%82%B6%E3%83%BC%E3%83%9E%E3%82%AF%E3%83%AD%E3%81%AE%E3%81%99%E3%82%9D%E3%82%81&amp;url=https%3A%2F%2Fkenchan0130.github.io%2Fpost%2F2018-04-19-1" onclick="window.open(this.href, 'hatena-share', 'width=550,height=600,menubar=no,toolbar=no,resizable=yes');return false;"> <i class="fab fa-hatena fa-lg"></i> </a> </section> <section class="post-donation"> <div class="post-donation-panel"> <p class="post-donation-description"> 参考になった・面白かったと感じていただけましたら、サポートいただけると励みになります。 </p> <a class="post-donation-button" href="https://www.buymeacoffee.com/kenchan0130" onclick="gtag('event', 'click-buymeacoffee', { event_category: 'www.buymeacoffee.com/kenchan0130', event_label: '/post/2018-04-19-1' });" target="_blank" rel="noopener noreferrer"> <p class="post-donation-button-body"> <img class="icon lazyload" alt="buymeacoffee" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" data-src="https://www.buymeacoffee.com/assets/img/BMC-btn-logo.svg"> <span class="label">サポートする</span> </p> </a> </div> </section> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-2444060431947599" data-ad-slot="7319689305" data-ad-format="auto"></ins> <script>(adsbygoogle=window.adsbygoogle||[]).push({});</script> <section class="sub-contents tags"> <div class="sub-contents-wrapper"> <div class="sub-contents-title">Tags</div> <div class="sub-contents-main"> <a href="/tag/atlassian">Atlassian</a> <a href="/tag/confluence">Confluence</a> </div> </div> </section> </div> </div> </div> <footer class="site-footer"> <div class="wrapper"> <h3 class="footer-heading">kenchan0130 blog</h3> <div class="site-navigation"> <p><strong>Site Map</strong></p> <ul class="pages"> <li class="nav-link"> <a href="/archives">Archives</a> </li> <li class="nav-link"> <a href="/privacy">Privacy Policy</a> </li> <li class="nav-link"> <a href="/profile">Profile</a> </li> <li class="nav-link"> <a href="/profile/resume">Resume</a> </li> </ul> </div> <div class="site-contact"> <p><strong>Contact</strong></p> <ul class="social-media-list"> <li> <a href="https://twitter.com/kenchan0130" title="Follow me on Twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> <span class="username">kenchan0130</span> </a> </li> <li> <a href="https://github.com/kenchan0130" title="Fork me on GitHub" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> <span class="username">kenchan0130</span> </a> </li> </ul> </div> <div class="site-signature"> <p class="rss-subscribe text"><strong>Subscribe <a href="/feed.xml">via RSS</a></strong></p> <p class="text">ソフトウェアエンジニア。記録に残したいことを雑に備忘するブログ。 投稿内容は個人の見解であり所属する組織の公式見解ではありません。 </p> </div> </div> <div class="licence">このサイトのコンテンツは<a href="https://creativecommons.org/licenses/by/4.0/deed.ja" target="_blank" rel="noopener noreferrer">Creative Commons Attribution 4.0 International (CC-BY-4.0) License</a>の下でライセンスされています。</div> <div class="copyright">Copyright © 2017-2025 Tadayuki Onishi All Rights Reserved.</div> </footer> <script src="/assets/bundle/app.6b4bd929e0a1773ddf90.js" async></script> <script async src="//www.googletagmanager.com/gtag/js?id=G-B7RX34Q5PL"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-B7RX34Q5PL");</script> <script async src="//www.googletagmanager.com/gtag/js?id=UA-79827366-2"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-79827366-2");</script> </body> </html>